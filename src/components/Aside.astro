---
import { validateLang, useTranslations } from '../i18n/utils'
import { Icon } from 'astro-icon/components'

export interface Props {
  type?: 'note' | 'tip' | 'caution' | 'danger'
  title?: string
}
const { lang } = Astro.params
validateLang(lang)
const t = useTranslations(lang)
const { type = 'note', title = t(`aside.layout.${type}`) } = Astro.props

// Minimal design: subtle left border with light background
const styles = {
  note: {
    icon: 'octicon:note-24',
    border: 'border-l-slate-400',
    text: 'text-slate-600'
  },
  tip: {
    icon: 'octicon:light-bulb-24',
    border: 'border-l-emerald-500',
    text: 'text-emerald-700'
  },
  caution: {
    icon: 'octicon:alert-16',
    border: 'border-l-amber-500',
    text: 'text-amber-700'
  },
  danger: {
    icon: 'octicon:stop-24',
    border: 'border-l-red-500',
    text: 'text-red-700'
  }
}

const style = styles[type]
---

<aside class={`not-prose my-6 pl-4 py-3 pr-3 bg-gray-50 border-l-4 ${style.border} rounded-r`} aria-label={title}>
    <p class={`flex items-center gap-2 ${style.text} font-medium text-sm mb-2`} aria-hidden="true">
        <Icon name={style.icon} class="w-4 h-4 flex-shrink-0"/>
        {title}
    </p>
    <div class="text-[--color-text-primary] text-sm leading-relaxed [&>p]:m-0 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:my-2 [&>ol]:list-decimal [&>ol]:pl-5 [&>ol]:my-2 [&_li]:my-1">
        <slot />
    </div>
</aside>
