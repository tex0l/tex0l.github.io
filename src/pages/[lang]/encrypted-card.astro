---
import { languages } from '~/i18n/index.ts'
import EncryptedBusinessCard from '@tex0l/encrypted-card/components/EncryptedBusinessCard.client.vue'
import BaseLayout from '~/layouts/BaseLayout.astro'
import { validateLang } from '~/i18n/utils'

export function getStaticPaths (): Array<{ params: { lang: string } }> {
  return Object.keys(languages).map(lang => ({ params: { lang } }))
}

const { lang } = Astro.params
validateLang(lang)

---
<BaseLayout title={'Encrypted business card'} description={'This page allows you to retrieve my contact information (if you have the password)'}>
    <slot slot="head">
        <meta property="og:type" content="website" />
        <meta property="og:image" content={`${Astro.url.origin}/og/${lang}-encrypted-card.png`} />
    </slot>
    <EncryptedBusinessCard
      client:only="vue"
      salt-path="/salt.txt"
      contact-info-path="/encrypted/contactInfo.json.encrypted"
      image-path="/encrypted/IMG-20220515-WA0004-removebg.png.encrypted"
  />
    <p class="mt-2 text-center text-xs text-(--color-text-muted)">
      <a class="underline hover:text-(--color-text-secondary) transition-colors" href={`/${lang}/blog/encrypted-card`}>{lang === 'fr' ? 'En savoir plus sur le chiffrement' : 'Learn more about the encryption'}</a>
    </p>
</BaseLayout>
