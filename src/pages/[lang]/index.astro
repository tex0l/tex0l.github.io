---
import { languages } from '~/i18n/index.ts'
import { Picture } from 'astro:assets'
import Layout from '~/layouts/Layout.astro'
import Trans from '~/components/i18n/Trans.astro'
import profilePicture from '~/resources/IMG-20220515-WA0004-removebg.png'
import { useTranslations, validateLang } from '~/i18n/utils'

export function getStaticPaths (): Array<{ params: { lang: string } }> {
  return Object.keys(languages).map(lang => ({ params: { lang } }))
}

const { lang } = Astro.params
validateLang(lang)
const t = useTranslations(lang)
---
<Layout title="Timothée Rebours" description={t('index.description')}>
    <Fragment slot="head">
        <meta property="og:type" content="website" />
        <meta property="og:image" content={`${Astro.url.origin}/og/${lang}-index.png`} />
        <meta name="twitter:image" content={`${Astro.url.origin}/og/${lang}-index.png`} />
    </Fragment>

    <div class="min-h-[calc(100vh-12rem)] flex items-center justify-center px-4 sm:px-6">
        <div class="max-w-4xl mx-auto flex flex-col lg:flex-row lg:gap-16 items-center">
            <!-- Profile Picture -->
            <div class="shrink-0 w-48 sm:w-56 lg:w-64 mb-8 lg:mb-0">
                <div class="relative">
                    <!-- Image container with bottom-rounded clipping -->
                    <div class="rounded-b-full aspect-[10/11] relative overflow-hidden">
                        <div class="w-4/5 ml-[10%]">
                            <Picture src={profilePicture} alt="Timothée Rebours" class="w-full"/>
                        </div>
                    </div>
                    <!-- Background circle positioned behind -->
                    <div class="absolute bottom-0 left-0 rounded-full aspect-square bg-gradient-to-b from-slate-200 to-slate-300 w-full -z-10"></div>
                </div>
            </div>

            <!-- Text Content -->
            <div class="text-center lg:text-left">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-semibold tracking-tight mb-4">
                    {t('index.h1')}
                </h1>
                <p class="text-xl sm:text-2xl text-[--color-text-secondary] leading-relaxed">
                    <Trans keyPath="index.subtitle">
                        <a
                            class="text-[--color-text-primary] underline underline-offset-2 hover:text-[--color-text-secondary]"
                            href="https://www.seald.io/"
                            target="_blank"
                            rel="noopener"
                        >
                            {t('index.seald')}
                        </a>
                    </Trans>
                </p>
            </div>
        </div>
    </div>
</Layout>
